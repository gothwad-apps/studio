<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Settings - Gothwad Studio</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- LAYOUT --- */
        body {
            background-color: var(--bg-color);
            margin: 0; padding: 0;
            padding-top: 60px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            color: var(--text-main);
        }

        /* HEADER */
        .app-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background: var(--surface-color);
            display: flex; align-items: center; justify-content: flex-start;
            gap: 10px; padding: 0 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }
        .icon-btn { background: none; border: none; font-size: 20px; color: var(--text-main); cursor: pointer; padding: 8px; }
        .page-title { font-size: 18px; font-weight: 700; color: var(--primary); margin: 0; }

        /* LIST GROUPS */
        .container { padding: 15px; padding-bottom: 80px; }
        .group-title { font-size: 12px; color: var(--text-sub); font-weight: 700; margin: 20px 0 10px 5px; text-transform: uppercase; }

        .setting-card {
            background: var(--surface-color);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .setting-item {
            padding: 15px;
            display: flex; align-items: center; justify-content: space-between;
            border-bottom: 1px solid var(--border);
        }
        .setting-item:last-child { border-bottom: none; }

        .set-label { font-size: 15px; font-weight: 500; }
        .set-desc { font-size: 11px; color: var(--text-sub); margin-top: 2px; }

        /* CONTROLS */
        select.control {
            padding: 8px; border-radius: 6px; border: 1px solid var(--border);
            background: var(--bg-color); color: var(--text-main); outline: none;
        }

        .toggle-switch {
            position: relative; width: 40px; height: 22px;
        }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; border-radius: 22px; transition: .4s;
        }
        .slider:before {
            position: absolute; content: "";
            height: 16px; width: 16px; left: 3px; bottom: 3px;
            background-color: white; border-radius: 50%; transition: .4s;
        }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(18px); }

        /* DANGER BTN */
        .danger-btn {
            width: 100%; padding: 15px;
            background: #ffebee; color: #d32f2f;
            border: 1px solid #ffcdd2; border-radius: 12px;
            font-weight: 600; cursor: pointer; margin-top: 10px;
        }
        
    </style>
</head>
<body>

    <!-- HEADER -->
    <header class="app-bar">
        <button class="icon-btn" onclick="window.history.back()"><i class="fas fa-arrow-left"></i></button>
        <div class="page-title">Settings</div>
    </header>

    <div class="container">
        
        <!-- APPEARANCE -->
        <div class="group-title">Appearance</div>
        <div class="setting-card">
            <div class="setting-item">
                <div>
                    <div class="set-label">App Theme</div>
                    <div class="set-desc">Light or Dark mode</div>
                </div>
                <select class="control" id="themeSelect" onchange="changeTheme()">
                    <option value="theme-default">Light (Default)</option>
                    <option value="theme-dark">Dark Night</option>
                    <option value="theme-ocean">Ocean Blue</option>
                </select>
            </div>
        </div>

        <!-- EDITOR -->
        <div class="group-title">Code Editor</div>
        <div class="setting-card">
            <div class="setting-item">
                <div>
                    <div class="set-label">Font Size</div>
                    <div class="set-desc">Text size in editor</div>
                </div>
                <select class="control" id="fontSizeSelect" onchange="saveEditorConfig()">
                    <option value="12px">Small (12px)</option>
                    <option value="14px" selected>Normal (14px)</option>
                    <option value="16px">Large (16px)</option>
                    <option value="18px">Huge (18px)</option>
                </select>
            </div>
            <div class="setting-item">
                <div>
                    <div class="set-label">Word Wrap</div>
                    <div class="set-desc">Wrap long lines</div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="wordWrapCheck" onchange="saveEditorConfig()" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-item">
                <div>
                    <div class="set-label">Live Preview</div>
                    <div class="set-desc">Auto-run code on typing</div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="livePrevCheck" onchange="saveEditorConfig()">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <!-- ABOUT -->
        <div class="group-title">About</div>
        <div class="setting-card">
            <div class="setting-item" onclick="window.location.href='privacy.html'">
                <div class="set-label">Privacy Policy</div>
                <i class="fas fa-chevron-right" style="font-size:12px; color:var(--text-sub);"></i>
            </div>
            <div class="setting-item">
                <div>
                    <div class="set-label">Version</div>
                    <div class="set-desc">Gothwad Studio v2.5.0</div>
                </div>
            </div>
        </div>

        <!-- DANGER -->
        <div class="group-title" style="color:#d32f2f;">Advanced</div>
        <button class="danger-btn" onclick="clearData()">
            <i class="fas fa-trash-alt"></i> Clear All Local Data
        </button>
        <p style="font-size:11px; color:var(--text-sub); text-align:center; margin-top:5px;">
            This will remove saved themes and settings (not your projects).
        </p>

    </div>

    <!-- LOGIC -->
    <script>
        // 1. Load Settings on Start
        window.onload = function() {
            // Theme
            let savedTheme = localStorage.getItem('gothwad_theme') || 'theme-default';
            document.documentElement.className = savedTheme;
            document.body.className = savedTheme;
            document.getElementById('themeSelect').value = savedTheme;

            // Editor Config
            let config = JSON.parse(localStorage.getItem('gothwad_editor_config')) || {
                fontSize: '14px', wordWrap: true, livePreview: false
            };
            document.getElementById('fontSizeSelect').value = config.fontSize;
            document.getElementById('wordWrapCheck').checked = config.wordWrap;
            document.getElementById('livePrevCheck').checked = config.livePreview;
        };

        // 2. Change Theme
        window.changeTheme = function() {
            let theme = document.getElementById('themeSelect').value;
            document.documentElement.className = theme;
            document.body.className = theme;
            localStorage.setItem('gothwad_theme', theme);
        }

        // 3. Save Editor Config (Used by editor.html later)
        window.saveEditorConfig = function() {
            let config = {
                fontSize: document.getElementById('fontSizeSelect').value,
                wordWrap: document.getElementById('wordWrapCheck').checked,
                livePreview: document.getElementById('livePrevCheck').checked
            };
            localStorage.setItem('gothwad_editor_config', JSON.stringify(config));
        }

        // 4. Clear Data
        window.clearData = function() {
            if(confirm("Reset all app settings? Your projects will remain safe.")) {
                localStorage.removeItem('gothwad_theme');
                localStorage.removeItem('gothwad_editor_config');
                alert("Settings reset! Restarting...");
                location.reload();
            }
        }
    </script>

</body>
</html>